<!DOCTYPE HTML>
<head>
<script>
var calculations;var temp=[];var i;var jew;
//real estate declarations
var RDFN;
var AMT;
var SPG;
var PSA;
const url = new URL(
    "https://api.worldtradingdata.com/api/v1/stock"
);
function price(symbol) {
let params = {
    "symbol": (symbol),
    "api_token": "CtE9BRvfbrygbjgMZorx5A8fhs0t1rBKOINinkWoG3aSNqLAp40jdELocr29",
};
Object.keys(params)
    .forEach(key => url.searchParams.append(key, params[key]));

fetch(url, {
    method: "GET",
})
    .then(response => response.json())
    .then(json => jew = ((Object.values(json))[2]));
}
function getPrice(symbols) {
price(symbols);
setTimeout(function(){
for (i = 0; i < (symbols.split(",").length); i++) {
temp[i] = ((Object.values(jew[i]))[0])+"*"+((Object.values(jew[i]))[10]);
}
}, 1000);
}
function findinarray(array, string) {
for (i = 0; i < array.length; i++) {
if ((array[i]).includes(string)) {
return(i);
}
}
}
function extract(symbol) {
return(Number(temp[String(findinarray(temp, symbol))].substring(temp[(findinarray(temp, symbol))].indexOf("*")+1, 10)));
}
function israel() {
getPrice("VNQ,RDFN,AMT,SPG,PSA");
calculations=1;
//real estate wave 1
setTimeout(function(){
VNQ=extract("VNQ");
console.log("VNQ (Real Estate):"+VNQ+"%");
RDFN=extract("RDFN");
AMT=extract("AMT");
SPG=extract("SPG");
PSA=extract("PSA");
if (VNQ-RDFN>.5) {
console.log("RDFN : " + RDFN + ", VNQ : " + VNQ);
}
if (VNQ-AMT>.5) {
console.log("AMT : " + AMT + ", VNQ : " + VNQ);
}
if (VNQ-SPG>.5) {
console.log("SPG : " + SPG + ", VNQ : " + VNQ);
}
if (VNQ-PSA>.5) {
console.log("PSA : " + PSA + ", VNQ : " + VNQ);
}
}, (1001*calculations));
}
israel();
</script>
</head>
<body>

</body>